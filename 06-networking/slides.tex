% Author: Jan Schaumann <jschauma@netmeister.org>
\special{! TeXDict begin /landplus90{true}store end }

\documentclass[xga]{xdvislides}
\usepackage[landscape]{geometry}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{colordvi}
\usepackage{multirow}

\usepackage{fancyvrb}
\fvset{commandchars=\\\{\}}

\usepackage[usenames]{color}
\usepackage[dvipsnames]{xcolor}
\definecolor{gray}{RGB}{180,180,180}

\begin{document}
\setfontphv

%%% Headers and footers
\lhead{\slidetitle}                               % default:\lhead{\slidetitle}
\chead{CS615 - Aspects of System Administration}% default:\chead{\relax}
\rhead{Slide \thepage}                       % default:\rhead{\sectiontitle}
\lfoot{\Gray{Networking I}}% default:\lfoot{\slideauthor}
\cfoot{\relax}                               % default:\cfoot{\relax}
\rfoot{\Gray{\today}}

\vspace*{\fill}
\begin{center}
	\Hugesize
		CS615 - Aspects of System Administration\\ [1em]
		Networking I\\ [1em]
	\hspace*{5mm}\blueline\\ [1em]
	\Normalsize
		Department of Computer Science\\
		Stevens Institute of Technology\\
		Jan Schaumann\\
		\verb+jschauma@stevens.edu+\\
		\verb+https://stevens.netmeister.org/615/+
\end{center}
\vspace*{\fill}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/osi-stack.eps}
\end{center}
\vspace*{\fill}

\subsection{Team Missions}
\begin{itemize}
	\item \textcolor{red}{https://www.us-cert.gov/ics/advisories/icsa-19-274-01}
	\item \textcolor{green}{https://is.gd/soixLV}
	\item https://is.gd/vSuYvF
	\item \textcolor{blue}{https://is.gd/qkXhe2}
\end{itemize}

\subsection{TCP}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/tcp-packet.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/osi-stack.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/osi-stack.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/osi-stack2.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking I}
\begin{verbatim}
$ sudo tcpdump -w /tmp/out port 80 &
$ curl -s -I http://www.cs.stevens.edu/ >/dev/null
$ fg
^C
$ sudo tcpdump -r /tmp/out -n -XX -c 1
15:23:43.477095 IP 172.16.1.30.51525 > 155.246.56.11.80: Flags [S], seq 1016422373,
    win 65535, options [mss 1460,nop,wscale 6,nop,nop,TS val 86305166 ecr 0,sackOK,eol], length 0
        0x0000:  c4b3 01db afe2 8c85 9047 b4f6 0800 4500  .........G....E.
        0x0010:  0040 0000 4000 4006 b988 ac10 011e 9bf6  .@..@.@.........
        0x0020:  380b c945 0050 3c95 5fe5 0000 0000 b002  8..E.P<._.......
        0x0030:  ffff 6109 0000 0204 05b4 0103 0306 0101  ..a.............
        0x0040:  080a 0524 e98e 0000 0000 0402 0000       ...$..........
\end{verbatim}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/tcp-encapsulation.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking I}
Layers:
\begin{Verbatim}
        0x0000:  \textcolor{red}{c4b3 01db afe2 8c85 9047 b4f6 0800} \textcolor{orange}{4500}  .........G....E.
        0x0010:  \textcolor{orange}{0040 0000 4000 4006 b988 ac10 011e 9bf6}  .@..@.@.........
        0x0020:  \textcolor{orange}{380b} \textcolor{cyan}{c945 0050 3c95 5fe5 0000 0000 b002}  8..E.P<._.......
        0x0030:  \textcolor{cyan}{ffff 6109 0000 0204 05b4 0103 0306 0101}  ..a.............
        0x0040:  \textcolor{cyan}{080a 0524 e98e 0000 0000 0402 0000}       ...$..........
\end{Verbatim}

\vspace{.25in}
\textcolor{red}{Link layer information}; here: Ethernet \\
\textcolor{orange}{Network layer information}; here: IP \\
\textcolor{cyan}{Transport layer information}; here: TCP

\subsection{Networking I}
OSI Layer 2 / TCP/IP Layer 1: Ethernet information: \\
\begin{Verbatim}
        0x0000:  \textcolor{blue}{c4b3 01db afe2} \textcolor{red}{8c85 9047 b4f6} \textcolor{green}{0800} \textcolor{orange}{4500}  .........G....E.
        0x0010:  \textcolor{orange}{0040 0000 4000 4006 b988 ac10 011e 9bf6}  .@..@.@.........
        0x0020:  \textcolor{orange}{380b} \textcolor{cyan}{c945 0050 3c95 5fe5 0000 0000 b002}  8..E.P<._.......
        0x0030:  \textcolor{cyan}{ffff 6109 0000 0204 05b4 0103 0306 0101}  ..a.............
        0x0040:  \textcolor{cyan}{080a 0524 e98e 0000 0000 0402 0000}       ...$..........
\end{Verbatim}

\vspace{.25in}
Destination address: \textcolor{blue}{c4:b3:01:db:af:e2} \\
Source address: \textcolor{red}{8c:85:90:47:b4:f6} \\
Type: IP (\textcolor{green}{0800}) \\
\textcolor{orange}{IPv4 stuff} \textcolor{cyan}{TCP stuff}
\vspace{.25in}

\begin{Verbatim}
$ ifconfig en0 | grep ether
	ether \textcolor{red}{8c:85:90:47:b4:f6}
\end{Verbatim}

\subsection{Networking I}
OSI Layer 3 / TCP/IP Layer 2: Internet Protocol: \\
\begin{Verbatim}
        0x0000:  c4b3 01db afe2 8c85 9047 b4f6 0800 \textcolor{gray}{45}\textcolor{green}{00}  .........G....E.
        0x0010:  \textcolor{cyan}{0040} \textcolor{yellow}{0000} \textcolor{olive}{40}00 \textcolor{orange}{40}06 b988 ac10 011e 9bf6  .@..@.@.........
        0x0020:  380b c945 0050 3c95 5fe5 0000 0000 b002  8..E.P<._.......
        0x0030:  ffff 6109 0000 0204 05b4 0103 0306 0101  ..a.............
        0x0040:  080a 0524 e98e 0000 0000 0402 0000       ...$..........
\end{Verbatim}
\vspace{.5in}

Version 4 (0100) + Header Length 20 (0101) = 01000101 = \textcolor{gray}{45} \\
DSCP default (000000) + Not-ECN (00) = \textcolor{green}{00} \\
Total length = \textcolor{cyan}{0040} = 64\\
Identification = \textcolor{yellow}{0000} \\
Flags = Don't Fragment (010) + Frag Offset (00000) = \textcolor{olive}{40}00 \\
TTL= \textcolor{orange}{40} = 64 \\


\subsection{Networking I}
OSI Layer 3 / TCP/IP Layer 2: Internet Protocol: \\
\begin{Verbatim}
        0x0000:  c4b3 01db afe2 8c85 9013 73c1 0800 4510  ..........s...E.
        0x0010:  0040 0000 4000 40\textcolor{purple}{06} b988 \textcolor{red}{ac10 011e} \textcolor{blue}{9bf6}  .@..@.@.........
        0x0020:  \textcolor{blue}{380b} \textcolor{green}{c945 0050 3c95 5fe5 0000 0000 b002}  8..E.P<._.......
        0x0030:  \textcolor{green}{ffff 6109 0000 0204 05b4 0103 0306 0101}  ..a.............
        0x0040:  \textcolor{green}{080a 0524 e98e 0000 0000 0402 0000}       ...$..........
\end{Verbatim}
Protocol: TCP (6) \textcolor{purple}{06} \\
Header Checksum: 0xb988 \\
Source Address: 172.16.1.30 (\textcolor{red}{ac10 011e}) \\
Destination Address: 155.246.56.11 (\textcolor{blue}{9bf6 380b}) \\
TCP Stuff: \textcolor{green}{c945 ... 0000}

\vspace{.25in}
\begin{Verbatim}
$ ifconfig en0 | grep "inet "
	inet \textcolor{red}{172.16.1.30} netmask 0xffffff00 broadcast 172.16.1.255
$ 
\end{Verbatim}

\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011111101100011100000001011| \\
\vspace{.5in}
IPv4 addresses are 32-bit numbers.
\end{center}
\Normalsize

\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011  11110110  00111000  00001011| \\
\vspace{.5in}
Each IPv4 address consists of four octets.
\end{center}
\Normalsize

\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011  11110110  00111000  00001011| \\

\verb|  155   .   246   .    56   .   11| \\


\begin{Verbatim}
        \textcolor{blue}{9B        F6        38       0B}
\end{Verbatim}
\vspace{.5in}
Each IPv4 address consists of four octets.
\end{center}
\Normalsize


\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011 11110110   00111000 00001011| \\
\vspace{.5in}
IPv4 addresses are divided into a {\em network part} and a {\em host part}. \\
\vspace{.25in}
Hosts on the same network ({\em broadcast domain}) can talk to each other
without the help of a router.
\end{center}
\Normalsize

\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\begin{Verbatim}
    \textcolor{red}{10}011011 11110110   00111000 00001011
\end{Verbatim}
\vspace{.5in}
There are three different {\em classes} of IPv4 networks.
\end{center}
\Normalsize

\subsection{IPv4 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\begin{Verbatim}
    \textcolor{red}{10}\textcolor{gray}{01}1011 11110110   00111000 00001011
\end{Verbatim}
\vspace{.5in}
There are three different {\em classes} of IPv4 networks. \\
Well, five, really.
\end{center}
\Normalsize

\subsection{IPv4 Basics}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.8]{pics/classfull.eps}
\end{center}
\vspace*{\fill}

\subsection{Subnets}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011  11110110  00111000  00001011| \\

\verb|11111111  11111111  00000000  00000000| \\
\vspace{.5in}
A {\em netmask} splits the IPv4 address into {\em network} and {\em host}
parts.
\end{center}
\Normalsize

\subsection{Subnets}
\vspace{.5in}
\Hugesize
\begin{center}
\verb|10011011  11110110  00111000  00001011| \\

\verb|11111111  11111111  11111111  00000000| \\
\vspace{.5in}
A {\em netmask} splits the IPv4 address into {\em network} and {\em host}
parts.
\end{center}
\Normalsize

\subsection{Subnets}
\begin{verbatim}
$ ipcalc -n 155.246.56.11/16
Address:   155.246.56.11        10011011.11110110. 00111000.00001011
Netmask:   255.255.0.0 = 16     11111111.11111111. 00000000.00000000
Wildcard:  0.0.255.255          00000000.00000000. 11111111.11111111
=>
Network:   155.246.0.0/16       10011011.11110110. 00000000.00000000
HostMin:   155.246.0.1          10011011.11110110. 00000000.00000001
HostMax:   155.246.255.254      10011011.11110110. 11111111.11111110
Broadcast: 155.246.255.255      10011011.11110110. 11111111.11111111
Hosts/Net: 65534                 Class B
\end{verbatim}
\vspace{.5in}
Try also: \verb+sipcalc -a 155.246.56.11/16+

\subsection{Subnets}
\begin{verbatim}
$ ipcalc -n 155.246.56.11/24
Address:   155.246.56.11        10011011.11110110.00111000. 00001011
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
=>
Network:   155.246.56.0/24      10011011.11110110.00111000. 00000000
HostMin:   155.246.56.1         10011011.11110110.00111000. 00000001
HostMax:   155.246.56.254       10011011.11110110.00111000. 11111110
Broadcast: 155.246.56.255       10011011.11110110.00111000. 11111111
Hosts/Net: 254                   Class B

\end{verbatim}
\vspace{.5in}
Try also: \verb+sipcalc -a 155.246.56.11/24+

\subsection{CIDR cheat sheet}
A.B.C.D/N
\begin{itemize}
	\item $N$ = bits describing network portion of address
	\item $M=32-N$ = bits in host portion of address
	\item $2^M$ = number of addresses on this subnet
	\item $2^M - 2$ = number of possible hosts
		\begin{itemize}
			\item first address on subnet = network address
			\item last address on subnet = broadcast address
		\end{itemize}
	\item subnet division need not occur on dotted boundary only
		\begin{itemize}
			\item for example, you can divide 155.246.89.0/24
				into four /26 networks
			\item networks starting at .0, .64, .128, .192
		\end{itemize}
\end{itemize}
\addvspace{.5in}
Which of the following is not a valid netmask? \\
\verb+255.255.253.0, 255.255.250.0, 255.255.240.0+

\subsection{Mommy, where do IP addresses come from?}
\Huge
\vfill
\begin{center}
The Internet Assigned Numbers Authority (IANA) oversees global IP
address/AS number allocation, root zone management etc.
\\
\vspace{.5in}
\verb+https://www.iana.org/+
\end{center}
\vfill
\Normalsize

\subsection{Mommy, where do IP addresses come from?}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.5]{pics/rirs.eps} \\
	\vspace{.5in}
	Regional Internet Registries (RIR) manage the allocation and
registration of Internet number resources within a region of the world.
\end{center}
\vspace*{\fill}

See also: \verb+https://www.xkcd.com/195/+

\subsection{Mommy, where do IP addresses come from?}
\vspace*{\fill}
\begin{center}
{\bf RIR}s assign blocks of IP addresses to the Local Internet Registries (LIR).
\\
\vspace{.5in}

LIRs are either ISPs, enterprises using a lot of addresses, or academic
institutions.
\end{center}
\vspace*{\fill}

\subsection{IPv4 Subnets: Common CIDRs}
\begin{verbatim}
10011011  11110110  00111000  00001011
       |         |  ||||   |  |||||||| /32   Host route
       |         |  ||||   |  ||||||   /30   "Glue network" (Point-to-point)
       |         |  ||||   |  |||||    /29   Smallest multi-host network
       |         |  ||||   |  ||||     /28   Small LAN
       |         |  ||||   |  |||      /27   Small LAN
       |         |  ||||   |  ||       /26   Small LAN
       |         |  ||||   |  |        /25   Large LAN
       |         |  ||||   |           /24   Large LAN
       |         |  ||||               /20   Small ISP / Large business
       |         |  |||                /19   LIR / ISP / Large business
       |         |  ||                 /18   LIR / ISP / Large business
       |         |  |                  /17   LIR / ISP / Large business
       |         |                     /16   LIR / ISP / Large business
       |                               /8    RIR
\end{verbatim}

\subsection{IPv4 Exhaustion}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.8]{pics/cerf.eps}
\end{center}
\vspace*{\fill}



\subsection{IPv4 Exhaustion}
IPv4 address space depletion: \\

\begin{itemize}
	\item private IP space (RFC1918): \verb+10.0.0.0/8+, \verb+172.16.0.0/12+, \verb+192.168.0.0/16+
	\item class D (\verb+224.0.0.0/4+) and E (\verb+240.0.0.0/4+)
	\item class As (16M addresses each!) initially handed out liberally \\
		(ATT, Apple, MIT, Stanford, Xerox, ...)
	\item subnetting often inefficient
	\item more and more devices added
\end{itemize}

\subsection{IPv4 Exhaustion}
IPv4 address space depletion: \\

Total theoretically available IP addresses: $2^{32}$
\\

RFC1918: {\tt 10.0.0.0/8}, {\tt 172.16.0.0/12}, {\tt 192.168.0.0/16}
\\

RFC5735 etc.: {\tt 0.0.0.0/8}, {\tt 100.64.0.0/10}, {\tt 127.0.0.0/8}, \\
{\tt 169.254.0.0/16}, {\tt 192.0.0.0/24}, {\tt 192.0.2.0/24}, \\
{\tt 192.88.99.0/24}, {\tt 198.18.0.0/15}, {\tt 198.51.100.0/24}, \\
{\tt 203.0.113.0/24}
\\

Class D/E: {\tt 224.0.0.0/4}, {\tt 240.0.0.0/4}
\\

"Limited broadcast": {\tt 255.255.255.255/32}
\\

What is the percent/number of actually available IP addresses?



\subsection{IPv4 Exhaustion}
Past and predicted: \\

\begin{tabular}{l r}
IANA Address Pool Exhaustion: & 2011-02-03 \\
APNIC reached final {\tt /8}: & 2011-04-19 \\
RIPENCC reached final {\tt /8}: & 2012-09-14 \\
LACNIC reached final {\tt /8}: & 2014-06-10 \\
ARIN reached final {\tt /8}: & 2015-09-24 \\
AFRINIC (predicted): & 2020-05-17 \\
\end{tabular}
\\

\vspace{.5in}
{\tt https://www.potaroo.net/tools/ipv4/} \\
{\tt https://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml}

\subsection{IPv6 Basics}
\vspace{.5in}
\Hugesize
\begin{center}
\begin{verbatim}
      10011011111101100011100000001011
\end{verbatim}
\vspace{.5in}
IPv4 addresses are 32-bit numbers.
\end{center}
\Normalsize

\subsection{IPv6 Basics}
\begin{verbatim}
$ sudo tcpdump -w /tmp/out port 80 &
$ curl -s -I http://www.yahoo.com/ >/dev/null
$ fg
^C
$ sudo tcpdump -t -r /tmp/out -n -XX -c 1
reading from PCAP-NG file /tmp/out.pcap
IP6 2001:470:1f07:1d1:a8af:a9d:98ff:e30f.52369 > 2001:4998:58:1836::11.80: Flags [S], seq 1370475612,
    win 65535, options [mss 1440,nop,wscale 6,nop,nop,TS val 90153796 ecr 0,sackOK,eol], length 0
	0x0000:  c4b3 01db afe2 8c85 9047 b4f6 86dd 6000  .........G....`.
	0x0010:  6c64 002c 0640 2001 0470 1f07 01d1 a8af  ld.,.@...p......
	0x0020:  0a9d 98ff e30f 2001 4998 0058 1836 0000  ........I..X.6..
	0x0030:  0000 0000 0011 cc91 0050 51af cc5c 0000  .........PQ..\..
	0x0040:  0000 b002 ffff aca1 0000 0204 05a0 0103  ................
	0x0050:  0306 0101 080a 055f a344 0000 0000 0402  ......._.D......
	0x0060:  0000                                     ..
\end{verbatim}

\subsection{IPv6 Basics}
OSI Layer 3 / TCP/IP Layer 2: Internet Protocol v6:
\begin{Verbatim}
	0x0000:  \textcolor{blue}{c4b3 01db afe2} \textcolor{red}{8c85 9047 b4f6} \textcolor{green}{86dd} \textcolor{orange}{6000}  .........G....`.
	0x0010:  \textcolor{orange}{6c64 002c 0640 2001 0470 1f07 01d1 a8af}  ld.,.@...p......
	0x0020:  \textcolor{orange}{0a9d 98ff e30f 2001 4998 0058 1836 0000}  ........I..X.6..
	0x0030:  \textcolor{orange}{0000 0000 0011} \textcolor{cyan}{cc91 0050 51af cc5c 0000}  .........PQ..\..
	0x0040:  \textcolor{cyan}{0000 b002 ffff aca1 0000 0204 05a0 0103}  ................
	0x0050:  \textcolor{cyan}{0306 0101 080a 055f a344 0000 0000 0402}  ......._.D......
	0x0060:  \textcolor{cyan}{0000}                                     ..
\end{Verbatim}

\vspace{.25in}
Destination address: \textcolor{blue}{c4:b3:01:db:af:e2} \\
Source address: \textcolor{red}{8c:85:90:47:b4:f6} \\
Type: IPv6 (\textcolor{green}{86dd}) \\
\textcolor{orange}{IPv6 stuff}
\textcolor{cyan}{TCP stuff}
\vspace{.15in}

\begin{Verbatim}
$ ifconfig en0 | grep ether
	ether \textcolor{red}{8c:85:90:47:b4:f6}
\end{Verbatim}

\subsection{IPv6 Basics}
OSI Layer 3 / TCP/IP Layer 2: Internet Protocol v6:
\begin{Verbatim}
	0x0000:  c4b3 01db afe2 8c85 9047 b4f6 86dd \textcolor{orange}{6000}  .........G....`.
	0x0010:  \textcolor{orange}{6c64 002c 06}\textcolor{purple}{40} \textcolor{red}{2001 0470 1f07 01d1 a8af}  ld.,.@...p......
	0x0020:  \textcolor{red}{0a9d 98ff e30f} \textcolor{blue}{2001 4998 0058 1836 0000}  ........I..X.6..
	0x0030:  \textcolor{blue}{0000 0000 0011} \textcolor{cyan}{cc91 0050 51af cc5c 0000}  .........PQ..\..
	0x0040:  \textcolor{cyan}{0000 b002 ffff 751a 0000 0204 05a0 0103}  ......u.........
	0x0050:  \textcolor{cyan}{0306 0101 080a 37c1 3edf 0000 0000 0402}  ......7.>.......
	0x0060:  \textcolor{cyan}{0000                                     ..}
\end{Verbatim}

\vspace{.15in}
\textcolor{orange}{Version, Traffic Class, Flow Label, Length, Next Header}; TTL: 64 (\textcolor{purple}{40}) \\
Source address: \textcolor{red}{2001:470:1f07:1d1:18af:0a9d:98ff:e30f} \\
Destination address: \textcolor{blue}{2001:4998:58:1836::11}
\vspace{.15in}

\begin{Verbatim}
$ ifconfig en0 | grep inet6
	inet6 fe80::1461:d52b:78a7:334a%en0 prefixlen 64 secured scopeid 0x5 
	inet6 2001:470:1f07:1d1:cd9:97f3:f16:eb48 prefixlen 64 autoconf secured 
	inet6 \textcolor{red}{2001:470:1f07:1d1:a8af:a9d:98ff:e30f} prefixlen 64 autoconf temporary 
\end{Verbatim}

\subsection{IPv6 Basics}
\Hugesize
\begin{center}
\begin{verbatim}
              0000000000100000
              0000000101001001
              1001100001011000
              0001100000110110
              0000000000000000
              0000000000000000
              0000000000000000
              0000000000010001
\end{verbatim}
\vspace{.5in}
IPv6 addresses are 128 bits.
\end{center}
\Normalsize

\subsection{IPv6 Basics}
\Hugesize
\begin{center}
IPv4: 32 bits $=>$ $2^{32}$ addresses \\
\vspace{.5in}
IPv6: 128 bits $=>$ $2^{128}$ addresses
\end{center}
\Normalsize

\subsection{IPv6 Basics}
\Hugesize
\begin{center}
IPv4: 32 bits $=>$ $4,294,967,296$ addresses \\
\vspace{.5in}
IPv6: 128 bits $=>$ $2^{128}$ addresses
\end{center}
\Normalsize

\subsection{IPv6 Basics}
\Hugesize
\begin{center}
IPv4: 32 bits $=>$ $4,294,967,296$ addresses \\
\vspace{.5in}
IPv6: 128 bits $=>$ $340,282,366,920,938,463,463,374,607,431,768,211,456$ addresses \\
\vspace{.5in}
\end{center}
\Normalsize

\subsection{IPv6 Basics}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.75]{pics/wolfram.eps} \\
	\verb+https://is.gd/94ve91+
\end{center}
\vspace*{\fill}

\subsection{IPv6 Basics}
\begin{itemize}
	\item 8x16 bit fields (words) in case insensitive colon hexadecimal
		representation
\begin{verbatim}
           2031:0000:0000:030F:0000:0000:0000:130B
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics}
\begin{itemize}
	\item 8x16 bit fields (words) in case insensitive colon hexadecimal
		representation
\begin{verbatim}
           2031:0000:0000:030F:0000:0000:0000:130B
\end{verbatim}
	\item Leading zeros in a field are optional:
\begin{verbatim}
           2031:0:0:30F:0:0:0:130B
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics}
\begin{itemize}
	\item 8x16 bit fields (words) in case insensitive colon hexadecimal
		representation
\begin{verbatim}
           2031:0000:0000:030F:0000:0000:0000:130B
\end{verbatim}
	\item Leading zeros in a field are optional:
\begin{verbatim}
           2031:0:0:30F:0:0:0:130B
\end{verbatim}
	\item Successive fields of 0 represented as ::, but only once in
			an address:
\begin{verbatim}
          2031::30F:0:0:0:130B        ok
          2031:0:0:30F::130B          ok
          2031::30F::130B             not ok
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics}
\begin{itemize}
	\item 8x16 bit fields (words) in case insensitive colon hexadecimal
		representation
\begin{verbatim}
           2031:0000:0000:030F:0000:0000:0000:130B
\end{verbatim}
	\item Leading zeros in a field are optional:
\begin{verbatim}
           2031:0:0:30F:0:0:0:130B
\end{verbatim}
	\item Successive fields of 0 represented as ::, but only once in
			an address:
\begin{verbatim}
          2031::30F:0:0:0:130B        ok
          2031:0:0:30F::130B          ok
          2031::30F::130B             not ok
\end{verbatim}
	\item
\begin{verbatim}
          0000:0000:0000:0000:0000:0000:0000:00001 =>
                                   0:0:0:0:0:0:0:1 => ::1
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics - Address Oddities}
\begin{itemize}
	\item Address may include a link name:
\begin{verbatim}
          2001:470:1f07:3d1::1%eth0
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics - Address Oddities}
\begin{itemize}
	\item Address may include a link name:
\begin{verbatim}
          2001:470:1f07:3d1::1%eth0
\end{verbatim}
	\item IPv4-mapped addresses
\begin{verbatim}
          0:0:0:0:0:ffff:66.163.162.9
          ::ffff:66.163.162.9
\end{verbatim}
\end{itemize}

\subsection{IPv6 Basics - Address Oddities}
\begin{itemize}
	\item Address may include a link name:
\begin{verbatim}
          2001:470:1f07:3d1::1%eth0
\end{verbatim}
	\item IPv4-mapped addresses
\begin{verbatim}
          0:0:0:0:0:ffff:66.163.162.9
          ::ffff:66.163.162.9
\end{verbatim}
	\item You need brackets to distinguish a port from an address:
		\begin{itemize}
			\item IPv4: \verb+66.163.162.9:22+
			\item IPv6: \verb+[2001:470:1f07:3d1::1]:22+
		\end{itemize}
\end{itemize}

\subsection{IPv6 Basics -- Address Scope}
\begin{itemize}
	\item Link-Local (example: \verb+fe80::e276:63ff:fe72:3900%xennet0+)
		\begin{itemize}
			\item Used on a single link
			\item Packets with link-local source or destination addresses are not
				forwarded to other links
		\end{itemize}
\end{itemize}

\subsection{IPv6 Basics -- Address Scope}
\begin{itemize}
	\item Link-Local (example: \verb+fe80::e276:63ff:fe72:3900%xennet0+)
		\begin{itemize}
			\item Used on a single link
			\item Packets with link-local source or destination addresses are not
				forwarded to other links
		\end{itemize}
	\item Unique-Local (\verb+fc00::/7+)
		\begin{itemize}
			\item Used for private IPv6 networks
			\item not globally routable
			\item Applications similar to RFC 1918
		\end{itemize}
\end{itemize}

\subsection{IPv6 Basics -- Address Scope}
\begin{itemize}
	\item Link-Local (example: \verb+fe80::e276:63ff:fe72:3900%xennet0+)
		\begin{itemize}
			\item Used on a single link
			\item Packets with link-local source or destination addresses are not
				forwarded to other links
		\end{itemize}
	\item Unique-Local (\verb+fc00::/7+)
		\begin{itemize}
			\item Used for private IPv6 networks
			\item not globally routable
			\item Applications similar to RFC 1918
		\end{itemize}
	\item Global (example: \verb+2001:470:1f07:3d1::1+)
		\begin{itemize}
			\item A globally unique address
			\item Packets with global addresses can be forwarded to any part of
				the global network
		\end{itemize}
\end{itemize}

%\subsection{IPv6 Configuration Types}
%\begin{itemize}
%	\item Static Configuration
%	\item Stateful Autoconfiguration (DHCPv6)
%	\item Stateless Address Autoconfiguration (SLAC)
%	\begin{itemize}
%		\item RFC2462
%		\item use of autonomously configured link-local address
%			using its EUI-64 address
%\begin{verbatim}
%          fe80::213:d3ff:fe9c:1840%eth0
%\end{verbatim}
%		\item at boot time, send Router Solicitation (RS) to
%			request Router Advertisements (RAs)
%	\end{itemize}
%\end{itemize}
%
\subsection{IPv6 Subnets}
\begin{verbatim}
$ sipcalc 2001:470:30:84:e276:63ff:fe72:3900/64
-[ipv6 : 2001:470:30:84:e276:63ff:fe72:3900/64] - 0

[IPV6 INFO]
Expanded Address        - 2001:0470:0030:0084:e276:63ff:fe72:3900
Compressed address      - 2001:470:30:84:e276:63ff:fe72:3900
Subnet prefix (masked)  - 2001:470:30:84:0:0:0:0/64
Address ID (masked)     - 0:0:0:0:e276:63ff:fe72:3900/64
Prefix address          - ffff:ffff:ffff:ffff:0:0:0:0
Prefix length           - 64
Address type            - Aggregatable Global Unicast Addresses
Network range           - 2001:0470:0030:0084:0000:0000:0000:0000 -
                          2001:0470:0030:0084:ffff:ffff:ffff:ffff

\end{verbatim}

\subsection{IPv6 Subnets: Common CIDRs}
\small
\begin{verbatim}
2001:0db8:0123:4567:89ab:cdef:1234:5678
|||| |||| |||| |||| |||| |||| |||| |||128   Single end-points and loopback
|||| |||| |||| |||| |||| |||| |||| ||124
|||| |||| |||| |||| |||| |||| |||| |120
|||| |||| |||| |||| |||| |||| |||| 116
|||| |||| |||| |||| |||| |||| |||112
|||| |||| |||| |||| |||| |||| ||108
|||| |||| |||| |||| |||| |||| |104
|||| |||| |||| |||| |||| |||| 100
|||| |||| |||| |||| |||| |||96
|||| |||| |||| |||| |||| ||92
|||| |||| |||| |||| |||| |88
|||| |||| |||| |||| |||| 84
|||| |||| |||| |||| |||80
|||| |||| |||| |||| ||76
|||| |||| |||| |||| |72
|||| |||| |||| |||| 68
|||| |||| |||| |||64                        Single End-user LAN (default prefix size for SLAAC)
|||| |||| |||| ||60
|||| |||| |||| |56                          Proposed minimal end sites assignment
|||| |||| |||| 52
|||| |||| |||48                             Default end sites assignment
|||| |||| ||44
|||| |||| |40
|||| |||| 36
|||| |||32                                  Local Internet registry minimum allocations
|||| ||28                                   Local Internet registry medium allocations
|||| |24                                    Local Internet registry large allocations
|||| 20                                     Local Internet registry extra large allocations
|||16
||12                                        Regional Internet Registry allocations from IANA
|8
\end{verbatim}
\Normalsize

\newpage
\vspace*{\fill}
\begin{center}
    \Hugesize
        Hooray! \\ [1em]
    \hspace*{5mm}
    \blueline\\
    \hspace*{5mm}\\
        5 Minute Break
\end{center}
\vspace*{\fill}

\subsection{Networking Buzzwords}
\\

\newcommand{\gargantuan}{\fontsize{45}{50}\selectfont}
\gargantuan
\begin{center}
``The network is the computer.'' \\
\small
\vspace*{.5in}
John Gage, Sun Microsystems
\end{center}
\Normalsize

\subsection{Networking Buzzwords}
\\

\gargantuan
\begin{center}
``The network is the network, \\
the computer is the computer - \\
sorry about the confusion.'' \\
\small
\vspace*{.5in}
Joe on Computing
\end{center}
\Normalsize

\subsection{Networking Buzzwords}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.9]{pics/cloud.eps}
\end{center}
\vspace*{\fill}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.4]{pics/map-of-internet.eps} \\
	\vspace*{\fill}
	\small
	\verb+http://www.chrisharrison.net/index.php/Visualizations/InternetMap+
	\Normalsize
\end{center}

\subsection{Networking}
/X? % /30
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.8]{pics/2computers.eps} \\
\end{center}
\vspace*{\fill}

\subsection{Networking}
/X? % /29
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.8]{pics/3computers.eps} \\
\end{center}
\vspace*{\fill}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.9]{pics/broadcast-domain.eps} \\
\end{center}
\vspace*{\fill}

\subsection{WHOIS ASN?}
\Huge
\vfill
\begin{center}
The Internet Assigned Numbers Authority (IANA) oversees global IP
address/AS number allocation, root zone management etc.
\\
\vspace{.5in}
\verb+https://www.iana.org/+
\end{center}
\vfill
\Normalsize

\subsection{WHOIS ASN?}
Autonomous System Numbers (ASNs) are assigned by IANA
to the RIRs, see e.g. {\tt
ftp://ftp.arin.net/pub/stats/arin/}
\\

You can query databases on the internet about e.g. IP
block or ASN information via the {\tt WHOIS} protocol:

\begin{verbatim}
$ whois 155.246.56.11 | more
NetRange:       155.246.0.0 - 155.246.255.255
CIDR:           155.246.0.0/16
NetName:        STEVENS
NetHandle:      NET-155-246-0-0-1
Parent:         NET155 (NET-155-0-0-0-0)
NetType:        Direct Assignment
Organization:   Stevens Institute of Technology (SIT)
RegDate:        1991-12-31
Updated:        2007-01-29
Ref:            https://rdap.arin.net/registry/ip/155.246.0.0
\end{verbatim}

\subsection{WHOIS ASN?}
Carriers connect their Autonomous Systems at {\em
Internet Exchange Points} (IXPs) to route traffic
between the different networks.\\

This {\em peering} happens amongst carriers on a
tiered basis. \\

Examples:
\begin{verbatim}
https://peeringdb.com/net?asn=21976
https://peeringdb.com/net?asn=6939
https://peeringdb.com/net/27
https://peeringdb.com/net/433
https://peeringdb.com/net/457
\end{verbatim}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=1.2]{pics/asns.eps} \\
\end{center}
\vspace*{\fill}

\subsection{WHOIS ASN?}
Most of these services are available via APIs or
text-based interfaces:

\begin{verbatim}
$ host www.google.com
www.google.com has address 172.217.0.36
www.google.com has IPv6 address 2607:f8b0:4006:807::2004
$ whois -h whois.cymru.com 2607:f8b0:4006:807::2004
AS      | IP                                       | AS Name
15169   | 2607:f8b0:4006:807::2004                 | GOOGLE - Google Inc., US
$ curl -s https://peeringdb.com/api/net?asn=15169 | python -mjson.tool | more
{ "data": [ {
            "aka": "Google, YouTube (for Google Fiber see AS16591 record)",
            "created": "2005-02-06T06:41:04Z",
            "id": 433,
            "info_ipv6": true,
            "info_prefixes4": 15000,
            "info_prefixes6": 750,
            "info_ratio": "Mostly Outbound",
\end{verbatim}

\subsection{Networking}
To find the path your packets might take, give {\tt
traceroute(1)} a go: \\

\begin{verbatim}
$ traceroute search.yahoo.com
traceroute to search.yahoo.com (63.250.200.63), 30 hops max, 60 byte packets
 1  155.246.89.2 (155.246.89.2)  0.342 ms postal0.cs.stevens-tech.edu (155.246.89.3)  0.251 ms 0.298 ms
 2  155.246.89.2 (155.246.89.2)  0.311 ms  0.300 ms gwa.cc.stevens.edu (155.246.151.37)  0.252 ms
 3  454a0465.cst.lightpath.net (69.74.4.101)  3.984 ms 3.761 ms  3.735 ms
 4  18267502.cst.lightpath.net (24.38.117.2)  32.559 ms  32.591 ms  32.577 ms
 5  hunt183-154.optonline.net (167.206.183.154)  4.473 ms  4.634 ms 18267502.cst.lightpath.net (24.38.117.2) 32.527 ms
 6  451be0a9.cst.lightpath.net (65.19.113.169)  5.170 ms  5.278 ms hunt183-154.optonline.net (167.206.183.154)  4.465 ms
 7  nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.928 ms 451be0a9.cst.lightpath.net (65.19.113.169)  5.153 ms nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.868 ms
 8  ae-1.pat2.bfw.yahoo.com (216.115.111.26)  26.422 ms ae-1.pat1.bfw.yahoo.com (216.115.111.28)  13.974 ms nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.572 ms
 9  et-18-1-0.msr1.bf2.yahoo.com (74.6.227.37)  17.812 ms et-18-1-0.msr2.bf1.yahoo.com (74.6.227.49)  16.576 ms ae-1.pat2.bfw.yahoo.com (216.115.111.26)  23.416 ms
10  et-0-1-1.clr1-a-gdc.bf1.yahoo.com (74.6.122.15) 18.817 ms et-0-1-1.clr2-a-gdc.bf1.yahoo.com (74.6.122.19)  17.672 ms et-0-1-0.clr1-a-gdc.bf1.yahoo.com (74.6.122.13) 17.947 ms
\end{verbatim}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=1.3]{pics/car-duct-tape.eps} \\
\end{center}
\vspace*{\fill}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.9]{pics/cable-layer.eps} \\
\end{center}
\vspace*{\fill}


\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=1.2]{pics/internet-undersea-cable.eps} \\
\end{center}
\vspace*{\fill}


\subsection{Networking}
Stringing cables across the oceans' floors since 1866!
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=1.0]{pics/internet-undersea-cable.eps} \\
	\verb+https://www.submarinecablemap.com/+ \\
	\verb+https://is.gd/CjanOu+
\end{center}
\vspace*{\fill}

\subsection{Networking}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/cablemap.eps} \\
	\verb+https://www.submarinecablemap.com/+ \\
\end{center}
\vspace*{\fill}



\subsection{Networking}
``The Net interprets censorship as damage and routes around it.'' \\

...except when it can't.

\begin{center}
\vspace*{\fill}
	\includegraphics[scale=0.4]{pics/syria-disappears.eps} \\
\vspace*{\fill}

{\tt https://blog.cloudflare.com/how-syria-turned-off-the-internet} \\
{\tt https://youtu.be/OZHKeYwnALc}
\end{center}

\subsection{Networking}
\begin{center}
\vspace*{\fill}
	\includegraphics[scale=0.9]{pics/tubes.eps} \\
\vspace*{\fill}
{\tt https://amzn.com/0061994952} \\
{\tt https://cromwell-intl.com/travel/usa/new-york-internet/}
\end{center}

\subsection{Networking}
The internet is a physical place. \\
\begin{center}
\vspace*{\fill}
	\includegraphics[scale=0.6]{pics/Room_641A.eps} \\
\vspace*{\fill}
{\tt https://en.wikipedia.org/wiki/Room\_641A}
\end{center}

\subsection{Networking}
Now identify the physical and organizational aspects
of your network traffic:

\begin{verbatim}
$ traceroute search.yahoo.com
traceroute to search.yahoo.com (63.250.200.63), 30 hops max, 60 byte packets
 1  155.246.89.2 (155.246.89.2)  0.342 ms postal0.cs.stevens-tech.edu (155.246.89.3)  0.251 ms 0.298 ms
 2  155.246.89.2 (155.246.89.2)  0.311 ms  0.300 ms gwa.cc.stevens.edu (155.246.151.37)  0.252 ms
 3  454a0465.cst.lightpath.net (69.74.4.101)  3.984 ms 3.761 ms  3.735 ms
 4  18267502.cst.lightpath.net (24.38.117.2)  32.559 ms  32.591 ms  32.577 ms
 5  hunt183-154.optonline.net (167.206.183.154)  4.473 ms  4.634 ms 18267502.cst.lightpath.net (24.38.117.2) 32.527 ms
 6  451be0a9.cst.lightpath.net (65.19.113.169)  5.170 ms  5.278 ms hunt183-154.optonline.net (167.206.183.154)  4.465 ms
 7  nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.928 ms 451be0a9.cst.lightpath.net (65.19.113.169)  5.153 ms nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.868 ms
 8  ae-1.pat2.bfw.yahoo.com (216.115.111.26)  26.422 ms ae-1.pat1.bfw.yahoo.com (216.115.111.28)  13.974 ms nyiix.bas1-m.nyc.yahoo.com (198.32.160.121)  6.572 ms
 9  et-18-1-0.msr1.bf2.yahoo.com (74.6.227.37)  17.812 ms et-18-1-0.msr2.bf1.yahoo.com (74.6.227.49)  16.576 ms ae-1.pat2.bfw.yahoo.com (216.115.111.26)  23.416 ms
10  et-0-1-1.clr1-a-gdc.bf1.yahoo.com (74.6.122.15) 18.817 ms et-0-1-1.clr2-a-gdc.bf1.yahoo.com (74.6.122.19)  17.672 ms et-0-1-0.clr1-a-gdc.bf1.yahoo.com (74.6.122.13) 17.947 ms
\end{verbatim}

\subsection{Networking I}
\vspace*{\fill}
\begin{center}
	\includegraphics[scale=0.7]{pics/osi-stack2.eps}
\end{center}
\vspace*{\fill}



% break here
% % 
% % \subsection{A simple example}
% % \Hugesize
% % \begin{center}
% % \begin{verbatim}
% % $ telnet www.google.com 80
% % 
% % \end{verbatim}
% % \end{center}
% % \Normalsize
% % \vspace*{\fill}
% % 
% % \subsection{A simple example}
% % \Hugesize
% % \begin{center}
% % \begin{verbatim}
% % $ telnet www.google.com 80
% % Trying 2607:f8b0:400c:c03::67...
% % Connected to www.google.com.
% % Escape character is '^]'.
% % GET / HTTP/1.0
% % 
% % \end{verbatim}
% % \end{center}
% % \Normalsize
% % \vspace*{\fill}
% % 
% % \subsection{A simple example}
% % \Hugesize
% % \begin{center}
% % \begin{verbatim}
% % $ telnet www.google.com 80
% % Trying 2607:f8b0:400c:c03::67...
% % Connected to www.google.com.
% % Escape character is '^]'.
% % GET / HTTP/1.0
% % 
% % HTTP/1.0 200 OK
% % Date: Mon, 17 Mar 2014 16:15:01 GMT
% % Content-Type: text/html; charset=ISO-8859-1
% % Server: gws
% % [...]
% % \end{verbatim}
% % \end{center}
% % \Normalsize
% % \vspace*{\fill}
% % 
% % \subsection{A simple example}
% % What exactly happens?
% % 
% % \subsection{A simple example}
% % \\
% % \Hugesize
% % \begin{center}
% % \begin{verbatim}
% % $ strace -f telnet www.google.com 80 2>strace.out
% % Trying 173.194.73.99...
% % Connected to www.google.com.
% % Escape character is '^]'.
% % GET / HTTP/1.0
% % 
% % [...]
% % \end{verbatim}
% % \end{center}
% % \Normalsize
% % \vspace*{\fill}
% % 
% % %\subsection{A simple example}
% % %Let's just look at what files this opens:
% % %\Hugesize
% % %\begin{center}
% % %\begin{verbatim}
% % %$ strace -f -e trace=open \
% % %        telnet www.yahoo.com 80 2>strace.out
% % %Trying 98.139.183.24...
% % %Connected to any-fp3-real.wa1.b.yahoo.com.
% % %Escape character is '^]'.
% % %HEAD / HTTP/1.0
% % 
% % %[...]
% % %\end{verbatim}
% % %\end{center}
% % %\Normalsize
% % %\vspace*{\fill}
% % 
% % 
% % 
% % \subsection{A simple example}
% % What exactly happens?
% % \\
% % \begin{itemize}
% % 	\item local host connects to remote host
% % 	\item sends command
% % 	\item receives data
% % \end{itemize}
% % 
% % \subsection{A simple example}
% % How exactly do we connect to the remote host?
% % \\
% % \begin{itemize}
% % 	\item look up hostname
% % 	\item open connection to IP address
% % \end{itemize}
% % 
% % \subsection{A simple example}
% % How exactly do we look up a hostname?
% % \\
% % \begin{itemize}
% % 	\item look up various local files
% % 	\item open a connection to a DNS server's IP
% % 	\item ask DNS server to resolve hostname
% % 	\item get back IP
% % \end{itemize}
% % 
% % \subsection{...open a few files...}
% % \begin{verbatim}
% % execve("/usr/bin/telnet", ["telnet", "www.google.com", "80"], [/* 29 vars */]) = 0
% % [...]
% % open("/etc/nsswitch.conf", O_RDONLY)    = 3
% % fstat(3, {st_mode=S_IFREG|0644, st_size=286, ...}) = 0
% % mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = [...]
% % read(3, "passwd: files ldap\ngroup: files "..., 4096) = 286
% % [...]
% % open("/etc/hosts", O_RDONLY|O_CLOEXEC)  = 3
% % fcntl(3, F_GETFD)                       = 0x1 (flags FD_CLOEXEC)
% % fstat(3, {st_mode=S_IFREG|0644, st_size=277, ...}) = 0
% % mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = [...]
% % read(3, "127.0.0.1    localhost\n\n# The fo"..., 4096) = 277
% % [...]
% % stat("/etc/resolv.conf", {st_mode=S_IFREG|0644, st_size=205, ...}) = 0
% % open("/etc/resolv.conf", O_RDONLY)      = 3
% % fstat(3, {st_mode=S_IFREG|0644, st_size=205, ...}) = 0
% % read(3, "nameserver 155.246.1.20\nnameserv"..., 4096) = 205
% % \end{verbatim}
% % 
% % \subsection{... query a DNS server ...}
% % \begin{verbatim}
% % [...]
% % socket(PF_INET, SOCK_DGRAM|SOCK_NONBLOCK, IPPROTO_IP) = 3
% % connect(3, {sa_family=AF_INET, sin_port=htons(53),
% %         sin_addr=inet_addr("155.246.1.20")}, 16) = 0
% % gettimeofday({1330805293, 202924}, NULL) = 0
% % sendto(3, "\364\333\1\0\0\1\0\0\0\0\0\0\3www\6google\3com\0\0\1\0\1", 32,
% %         MSG_NOSIGNAL, NULL, 0) = 32
% % poll([{fd=3, events=POLLIN}], 1, 5000)  = 1 ([{fd=3, revents=POLLIN}])
% % ioctl(3, FIONREAD, [504])               = 0
% % recvfrom(3, "\364\333\201\200\0\1\0\6\0\r\0\10\3www\6google\3com\0\0\1\0\1"...,
% %         1024, 0, {sa_family=AF_INET, sin_port=htons(53),
% %         sin_addr=inet_addr("155.246.1.20")}, [16]) = 504
% % close(3)                                = 0
% % [...]
% % \end{verbatim}
% % 
% % \subsection{...communicate with the remote host...}
% % \begin{verbatim}
% % [...]
% % write(1, "Trying 173.194.73.104...\n", 25) = 25
% % close(4294967295)                       = -1 EBADF (Bad file descriptor)
% % socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 3
% % setsockopt(3, SOL_IP, IP_TOS, [16], 4)  = 0
% % connect(3, {sa_family=AF_INET, sin_port=htons(80),
% %         sin_addr=inet_addr("173.194.73.104")},16) = 0
% % [...]
% % read(0, "GET / HTTP/1.0\n", 8191)       = 15
% % select(4, [0 3], [3], [3], {0, 0})      = 1 (out [3], left {0, 0})
% % sendto(3, "GET / HTTP/1.0\r\n", 16, 0, NULL, 0) = 16
% % [...]
% % recvfrom(3, "HTTP/1.0 200 OK\r\nDate: Sat, 02 M"..., 8191, 0, NULL, NULL) = 5520
% % select(4, [0 3], [1], [3], {0, 0})      = 2 (in [3], out [1], left {0, 0})
% % write(1, "HTTP/1.0 200 OK\nDate: Sat, 02 Ma"..., 5508) = 5508
% % recvfrom(3, "", 6035, 0, NULL, NULL)    = 0
% % [...]
% % \end{verbatim}
% % 
% % % ktrace
% % %\subsection{A simple example}
% % %... look up various local files...
% % %\begin{verbatim}
% % %[...]
% % %  5921      1 telnet   CALL  open(0xbba06a65,0,0x1b6)
% % %  5921      1 telnet   NAMI  "/etc/nsswitch.conf"
% % %  5921      1 telnet   RET   open 3
% % %[...]
% % %  5921      1 telnet   CALL  open(0xbba0474b,0,0x1b6)
% % %  5921      1 telnet   NAMI  "/etc/hosts"
% % %  5921      1 telnet   RET   open 3
% % %[...]
% % %  5921      1 telnet   CALL  open(0xbba0495b,0,0x1b6)
% % %  5921      1 telnet   NAMI  "/etc/resolv.conf"
% % %  5921      1 telnet   RET   open 3
% % %[...]
% % %\end{verbatim}
% % 
% % %\subsection{A simple example}
% % %... query a DNS server ...
% % %\begin{verbatim}
% % %[...]
% % %  5921      1 telnet   CALL  socket(2,2,0)
% % %  5921      1 telnet   RET   socket 3
% % %  5921      1 telnet   CALL  connect(3,0xbba210f0,0x10)
% % %  5921      1 telnet   RET   connect 0
% % %  5921      1 telnet   CALL  sendto(3,0xbfbee0d0,0x1f,0,0,0)
% % %  5921      1 telnet   GIO   fd 3 wrote 31 bytes
% % %       "[T\^A\0\0\^A\0\0\0\0\0\0\^Cwww\^Eyahoo\^Ccom\0\0\^\\0\^A"
% % %[...]
% % %  5921      1 telnet   CALL  recvfrom(3,0x8077000,0x10000,0,
% % %                                         0xbfbeda10,0xbfbed9d4)
% % %  5921      1 telnet   GIO   fd 3 read 139 bytes
% % %       "[T\M^A\M^@\0\^A\0\^B\0\^A\0\0\^Cwww\^Eyahoo\^Ccom\0\0\^\\0\^A\M-
% % %  5921      1 telnet   RET   recvfrom 139/0x8b
% % %  5921      1 telnet   CALL  close(3)
% % %[...]
% % %\end{verbatim}
% % 
% % %\subsection{A simple example}
% % %... communicate with remote host ...
% % %\begin{verbatim}
% % %  5821      1 telnet   CALL  read(0,0x5222a0,0x400)
% % %  5821      1 telnet   GIO   fd 0 read 15 bytes
% % %       "GET / HTTP/1.0\n"
% % %  5821      1 telnet   RET   read 15/0xf
% % %  5821      1 telnet   CALL  poll(0x7f7fffffd440,3,0)
% % %  5821      1 telnet   RET   poll 1
% % %  5821      1 telnet   CALL  sendto(3,0x521260,0x10,0,0,0)
% % %  5821      1 telnet   GIO   fd 3 wrote 16 bytes
% % %       "GET / HTTP/1.0\r\n"
% % %  5821      1 telnet   RET   sendto 16/0x10
% % %\end{verbatim}
% % %\Normalsize
% % 
% % %\subsection{A simple example}
% % %... communicate with remote host ...
% % %\begin{verbatim}
% % %  5921      1 telnet   CALL  recvfrom(3,0x8064b80,0x400,0,0,0)
% % %  5921      1 telnet   GIO   fd 3 read 1024 bytes
% % %       "HTTP/1.1 200 OK\r
% % %        Date: Sat, 19 Mar 2011 22:55:56 GMT\r
% % %        Connection: close\r
% % %        Content-Type: text/html; charset=utf-8\r
% % %        <html>
% % %        <head>
% % %        <title>Yahoo!</title>
% % %[...]
% % %\end{verbatim}
% % \Normalsize
% % 
% % \subsection{A simple example}
% % What does this look like on the wire?
% % \\
% % 
% % \begin{itemize}
% % 	\item determine which nameserver to query
% % 	\item ask who has a route to the nameserver
% % 	\item open socket to well defined port on remote IP
% % 	\item send queries
% % 	\item open socket to requested port on remote IP
% % \end{itemize}
% % 
% % \subsection{A simple example}
% % What does this look like on the wire?
% % \vspace*{1in}
% % \\
% % \Hugesize
% % \begin{center}
% % \begin{verbatim}
% % # tcpdump port not 22
% % \end{verbatim}
% % \end{center}
% % \Normalsize
% % \vspace*{\fill}
% % 
% % \subsection{What does this look like on the wire?}
% % \begin{verbatim}
% % $ start-netbsd # custom shell alias
% % $ ssh <instance-name>
% % # script commands.out
% % # ifconfig -a
% % # route -n get default
% % # cat /etc/resolv.conf
% % # tcpdump -w tcpdump.out port not 22 &
% % # arp -d -a
% % # ping -n -c 3 98.139.180.149
% % # telnet www.google.com 80
% % [...]
% % # kill %1
% % # exit
% % # exit
% % $ scp <instance-name>:*out ~/tmp/
% % $ ec2-terminate-instances <instance>
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Finding the next hop:
% % \begin{verbatim}
% % $ tcpdump -n -r tcpdump.out arp
% % reading from file tcpdump.out, link-type EN10MB (Ethernet)
% % 18:06:59.217533 ARP, Request who-has 10.114.62.1 tell 10.114.63.209, length 28
% % 18:06:59.218187 ARP, Reply 10.114.62.1 is-at fe:ff:ff:ff:ff:ff, length 28
% % 18:07:06.148475 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:07:06.148499 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % 18:08:05.820986 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:08:05.821011 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % 18:09:18.518859 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:09:18.518878 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % 18:10:17.081885 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:10:17.081903 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Performing the DNS query:
% % \begin{verbatim}
% % $ tcpdump -t -n -r tcpdump.out udp port 53
% % reading from file tcpdump.out, link-type EN10MB (Ethernet)
% % IP 10.202.150.59.65511 > 172.16.0.23.53: 60916+ AAAA? www.google.com. (32)
% % IP 172.16.0.23.53 > 10.202.150.59.65511: 60916 1/0/0 AAAA 2607:f8b0:400c:c01::93 (60)
% % IP 10.202.150.59.65510 > 172.16.0.23.53: 1928+ A? www.google.com. (32)
% % IP 172.16.0.23.53 > 10.202.150.59.65510: 1928 6/0/0 A 173.194.75.105, A
% % 173.194.75.106, A 173.194.75.147, A 173.194.75.99, A 173.194.75.103, A 173.194.75.104 (128)
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Establishing the connection to the server:
% % \begin{verbatim}
% % $ tcpdump -n -r tcpdump.out tcp port 80
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [S],
% %         seq 4158935008, win 32768,
% %         options [mss 1460,nop,wscale 3, ...], length 0
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [S.],
% %         seq 933875667, ack 4158935009, win 62920,
% %         options [mss 1430,nop,nop, ...], length 0
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [.],
% %         ack 1, win 4197, length 0
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Sending the HTTP request:
% % \begin{verbatim}
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [P.],
% %         seq 1:17, ack 1, win 4197, length 16
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         ack 17, win 984, length 0
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [P.],
% %         seq 17:19, ack 1, win 4197, length 2
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         ack 19, win 984, length 0
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Receiving the HTTP response:
% % \begin{verbatim}
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         seq 1:1431, ack 19, win 984, length 1430
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         seq 1431:2861, ack 19, win 984, length 1430
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [.],
% %         ack 2861, win 3840, length 0
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         seq 2861:4291, ack 19, win 984, length 1430
% % \end{verbatim}
% % 
% % \subsection{A simple example}
% % Terminating the connection:
% % \begin{verbatim}
% % [...]
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [.],
% %         ack 42901, win 3738, length 0
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [.],
% %         ack 42901, win 4122, length 0
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         seq 42901:44331, ack 19, win 984, length 1430
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [FP.],
% %         seq 44331:44839, ack 19, win 984, length 508
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [.],
% %         ack 44840, win 4134, length 0
% % IP 10.202.150.59.65531 > 173.194.75.105.80: Flags [F.],
% %         seq 19, ack 44840, win 4197, length 0
% % IP 173.194.75.105.80 > 10.202.150.59.65531: Flags [.],
% %         ack 20, win 984, length 0
% % \end{verbatim}
% % 
% % \subsection{Notables from this simple example}
% % ``Simple'' is, as usual, relative.
% % 
% % \subsection{Notables from this simple example}
% % ``Simple'' is, as usual, relative.
% % \\
% % 
% % \begin{itemize}
% % 	\item host configuration assumed
% % 	\item network architecture (internal or across the internet) not
% % 			relevant (here)
% % 	\item even simple examples cross multiple layers and protocols
% % 			(HTTP, DNS; TCP, UDP, ARP)
% % 	\item we haven't even scratched the surface
% % \end{itemize}
% % 
% % \subsection{TCP/IP Basics: Protocol Layers}
% % \begin{center}
% % 	\begin{tabular}{|cl|l|}
% % 	\hline
% % 	& {\bf Layer} & {\bf Function} \\
% % 	\hline
% % 	4. & Application Layer & End-User application programs \\
% % 	3. & Transport Layer & Delivery of data to applications \\
% % 	2. & Network Layer & Basic communication, addressing, and routing \\
% % 	\multirow{2}{*}{1.} & Link Layer & Network Hardware and device drivers \\
% % 	& Physical Layer & Cable or physical medium \\
% % 	\hline
% % 	\end{tabular}
% % \end{center}
% % \addvspace{.5in}
% % Examples of protocols for each layer:
% % \begin{itemize}
% % 	\item Simple Mail Transfer Protocol (RFC 821) \\
% % 		Hypertext Transfer Protocol (RFC 2616)
% % 	\item Transmission Control Protocol (RFC 793, tcp(4)) \\
% % 		User Datagram Protocol (RFC 768; udp(4))
% % 	\item Internet Protocol (RFC 791; ip(4)) \\
% % 		Internet Control Message Protocol (RFC 792; icmp(4))
% % 	\item Address Resolution Protocol (RFC 826; arp(4))
% % \end{itemize}
% % 
% % \subsection{TCP/IP Basics: Protocol Layers (OSI Model)}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.7]{pics/osi.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % \subsection{TCP/IP Basics: ARP}
% % \begin{center}
% % Ethernet Address Resolution Protocol \\
% % -- or -- \\
% % Converting Network Protocol Addresses to 48-bit Ethernet Address for Transmission on Ethernet Hardware
% % \end{center}
% % 
% % \begin{verbatim}
% % $ arp -a
% % logger.srcit.stevens-tech.edu (155.246.89.81) at 00:07:e9:09:c8:94 [ether] on eth0
% % vader.srcit.stevens-tech.edu (155.246.89.5) at 00:23:8b:a9:dd:60 [ether] on eth0
% % tarantula.phy.stevens-tech.edu (155.246.89.41) at 00:50:45:5f:1c:d4 [ether] on eth0
% % nirvana.phy.stevens-tech.edu (155.246.89.33) at 00:1e:68:0f:99:a2 [ether] on eth0
% % Vlan16.cc.stevens-tech.edu (155.246.89.1) at 00:09:44:d1:64:00 [ether] on eth0
% % cinema.srcit.stevens-tech.edu (155.246.89.67) at 00:25:90:1e:05:51 [ether] on eth0
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ARP}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/3computers-arp.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % 
% % \subsection{TCP/IP Basics: ARP}
% % \begin{center}
% % Ethernet Address Resolution Protocol \\
% % -- or -- \\
% % Converting Network Protocol Addresses to 48-bit Ethernet Address for Transmission on Ethernet Hardware
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % 18:06:59.217533 ARP, Request who-has 10.114.62.1 tell 10.114.63.209, length 28
% % 18:06:59.218187 ARP, Reply 10.114.62.1 is-at fe:ff:ff:ff:ff:ff, length 28
% % 18:07:06.148475 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:07:06.148499 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % 18:08:05.820986 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:08:05.821011 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % 18:09:18.518859 ARP, Request who-has 10.114.63.209 (ff:ff:ff:ff:ff:ff)
% %                              tell 0.0.0.0, length 28
% % 18:09:18.518878 ARP, Reply 10.114.63.209 is-at 12:31:3d:04:30:23, length 28
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ND}
% % \begin{center}
% % Neighbor Discovery Protocol
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ ndp -n -a
% % Neighbor                            Linklayer Address  Netif Expire      S Flags
% % 2001:470:30:84:e276:63ff:fe72:3900  e0:76:63:72:39:00  xennet0 permanent R
% % fe80::21b:21ff:fe45:bf54%xennet0    00:1b:21:45:bf:54  xennet0 21m52s    S R
% % fe80::21b:21ff:fe7a:7269%xennet0    00:1b:21:7a:72:69  xennet0 23h59m59s S R
% % fe80::e276:63ff:fe72:3900%xennet0   e0:76:63:72:39:00  xennet0 permanent R
% % fe80::1%lo0                          (incomplete)      lo0     permanent R
% % $
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ND}
% % \begin{center}
% % Neighbor Discovery Protocol
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % 22:35:47.947624 IP6 fe80::21b:21ff:fe7a:7269 > ff02::1:ff62:3400: ICMP6,
% %         neighbor solicitation, who has 2001:470:30:84:e276:63ff:fe62:3400, length 32
% % 22:35:50.950101 IP6 2001:470:30:84:e276:63ff:fe72:3900 > ff02::1:ff7a:7269: ICMP6,
% %         neighbor solicitation, who has fe80::21b:21ff:fe7a:7269, length 32
% % 22:35:50.950690 IP6 fe80::21b:21ff:fe7a:7269 > 2001:470:30:84:e276:63ff:fe72:3900:
% %         ICMP6, neighbor advertisement, tgt is fe80::21b:21ff:fe7a:7269, length 32
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP}
% % \begin{center}
% % Internet Control Message Protocol
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ ping -c 3 www.yahoo.com
% % PING any-fp.wa1.b.yahoo.com (67.195.160.76): 56 data bytes
% % 64 bytes from 67.195.160.76: icmp_seq=0 ttl=53 time=30.888 ms
% % 64 bytes from 67.195.160.76: icmp_seq=1 ttl=53 time=23.193 ms
% % 64 bytes from 67.195.160.76: icmp_seq=2 ttl=53 time=25.433 ms
% % 
% % ----any-fp.wa1.b.yahoo.com PING Statistics----
% % 3 packets transmitted, 3 packets received, 0.0% packet loss
% % round-trip min/avg/max/stddev = 23.193/26.505/30.888/3.958 ms
% % $
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP: Ping}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/3computers-ping.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % 
% % \subsection{TCP/IP Basics: ICMP}
% % \begin{center}
% % Internet Control Message Protocol
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ tcpdump -r tcpdump.out -n icmp
% % 13:23:03.081954 IP 166.84.7.99 > 67.195.160.76: icmp 64: echo request seq 23
% % 13:23:03.092153 IP 67.195.160.76 > 166.84.7.99: icmp 64: echo reply seq 23
% % 13:23:04.081865 IP 166.84.7.99 > 67.195.160.76: icmp 64: echo request seq 24
% % 13:23:04.090909 IP 67.195.160.76 > 166.84.7.99: icmp 64: echo reply seq 24
% % 13:23:05.071735 IP 166.84.7.99 > 67.195.160.76: icmp 64: echo request seq 25
% % 13:23:05.081368 IP 67.195.160.76 > 166.84.7.99: icmp 64: echo reply seq 25
% % \end{verbatim}
% % 
% % 
% % \subsection{TCP/IP Basics: ICMP6}
% % \begin{center}
% % Internet Control Message Protocol for IPv6
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ ping6 -c 3 www.netbsd.org
% % PING6(56=40+8+8 bytes) 2001:470:30:84:204:d7b0:0:1 -->
% %                        2001:4f8:3:7:2e0:81ff:fe52:9a6b
% % 16 bytes from 2001:4f8:3:7:2e0:81ff:fe52:9a6b, icmp_seq=0 hlim=57 time=74.316 ms
% % 16 bytes from 2001:4f8:3:7:2e0:81ff:fe52:9a6b, icmp_seq=1 hlim=57 time=71.260 ms
% % 16 bytes from 2001:4f8:3:7:2e0:81ff:fe52:9a6b, icmp_seq=2 hlim=57 time=71.321 ms
% % 
% % --- www.netbsd.org ping6 statistics ---
% % 3 packets transmitted, 3 packets received, 0.0% packet loss
% % round-trip min/avg/max/std-dev = 71.260/72.299/74.316/1.747 ms
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP6}
% % \begin{center}
% % Internet Control Message Protocol for IPv6
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % 12:46:58.524431 IP6 2001:470:30:84:204:d7b0:0:1 >
% %    2001:4f8:3:7:2e0:81ff:fe52:9a6b: ICMP6, echo reque st, seq 0, length 16
% % 12:46:58.598621 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b >
% %    2001:470:30:84:204:d7b0:0:1: ICMP6, echo reply , seq 0, length 16
% % 12:46:59.532864 IP6 2001:470:30:84:204:d7b0:0:1 >
% %    2001:4f8:3:7:2e0:81ff:fe52:9a6b: ICMP6, echo request, seq 1, length 16
% % 12:46:59.604011 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b >
% %    2001:470:30:84:204:d7b0:0:1: ICMP6, echo reply , seq 1, length 16
% % 12:47:00.532817 IP6 2001:470:30:84:204:d7b0:0:1 >
% %    2001:4f8:3:7:2e0:81ff:fe52:9a6b: ICMP6, echo reque st, seq 2, length 16
% % 12:47:00.604016 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b >
% %    2001:470:30:84:204:d7b0:0:1: ICMP6, echo reply , seq 2, length 16
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP: Traceroute}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/traceroute1.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % \subsection{TCP/IP Basics: ICMP: Traceroute}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/traceroute2.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % \subsection{TCP/IP Basics: ICMP: Traceroute}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/traceroute3.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % \subsection{TCP/IP Basics: ICMP: Traceroute}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/traceroute4.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % 
% % 
% % \subsection{TCP/IP Basics: ICMP}
% % \begin{center}
% % Internet Control Message Protocol
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ traceroute www.netbsd.org
% % traceroute to www.netbsd.org (204.152.190.12), 64 hops max, 40 byte packets
% %  1  eth2-3a.core1.nav.nyc.access.net (166.84.0.1)  0.256 ms  0.165 ms 0.181 ms
% %  2  l3v1.nyc.access.net (166.84.66.14)  1.570 ms  1.556 ms  1.437 ms
% %  3  gige-g3-3.core1.nyc4.he.net (209.51.171.25)  4.963 ms  2.422 ms  1.457 ms
% %  4  10gigabitethernet2-3.core1.ash1.he.net (72.52.92.86)  8.423 ms  8.769 ms  7.683 ms
% %  5  10gigabitethernet1-2.core1.atl1.he.net (184.105.213.110)  21.898 ms 19.647 ms  19.838 ms
% %  6  isc.gige-g2-1.core1.atl1.he.net (216.66.0.50)  77.465 ms  77.921 ms 80.519 ms
% %  7  iana.r1.atl1.isc.org (199.6.12.1)  77.302 ms  78.230 ms  81.782 ms
% %  8  int-0-5-0-1.r1.pao1.isc.org (149.20.65.37)  81.860 ms  83.780 ms 84.160 ms
% %  9  int-0-0-1-0.r1.sql1.isc.org (149.20.65.10)  81.543 ms  80.193 ms 84.434 ms
% % 10  www.netbsd.org (204.152.190.12)  81.986 ms  81.008 ms  82.604 ms
% % $
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP}
% % \begin{center}
% % Internet Control Message Protocol
% % \end{center}
% % 
% % \begin{verbatim}
% % IP (tos 0x0, ttl 1, id 44866, offset 0, flags [none], proto UDP (17), length 40)
% %     166.84.7.99.44865 > 149.20.53.86.33435: [udp sum ok] UDP, length 12
% % IP (tos 0xc0, ttl 64, id 48796, offset 0, flags [none], proto ICMP (1), length 68)
% %     166.84.0.1 > 166.84.7.99: ICMP time exceeded in-transit, length 48
% % IP (tos 0x0, ttl 2, id 44869, offset 0, flags [none], proto UDP (17), length 40)
% %     166.84.7.99.44865 > 149.20.53.86.33438: [udp sum ok] UDP, length 12
% % IP (tos 0x0, ttl 3, id 44872, offset 0, flags [none], proto UDP (17), length 40)
% %     166.84.7.99.44865 > 149.20.53.86.33441: [udp sum ok] UDP, length 12
% % IP (tos 0x0, ttl 4, id 44875, offset 0, flags [none], proto UDP (17), length 40)
% %     166.84.7.99.44865 > 149.20.53.86.33444: [udp sum ok] UDP, length 12
% % IP (tos 0x0, ttl 252, id 6760, offset 0, flags [none], proto ICMP (1), length 56)
% %     154.24.25.109 > 166.84.7.99: ICMP time exceeded in-transit, length 36
% % ...
% % IP (tos 0x0, ttl 248, id 0, offset 0, flags [none], proto ICMP (1), length 56)
% %     149.20.53.86 > 166.84.7.99: ICMP 149.20.53.86 udp port 33482 unreachable, length 36
% % \end{verbatim}
% % 
% % 
% % \subsection{TCP/IP Basics: ICMP6}
% % \begin{center}
% % Internet Control Message Protocol for IPv6
% % \end{center}
% % \vspace{.2in}
% % 
% % \begin{verbatim}
% % $ traceroute6 www.netbsd.org
% % traceroute6 to www.netbsd.org (2001:4f8:3:7:2e0:81ff:fe52:9a6b) from
% %     2001:470:30:84:204:d7b0:0:1, 64 hops max, 12 byte packets
% %  1  router.vc.panix.com  0.271 ms  0.282 ms  0.155 ms
% %  2  2001:470:30::a654:420e  5.459 ms  1.251 ms  1.073 ms
% %  3  gige-g3-3.core1.nyc4.he.net  1.288 ms  2.001 ms  10.176 ms
% %  4  10gigabitethernet8-3.core1.chi1.he.net  26.603 ms  20.532 ms  25.029 ms
% %  5  2001:470:1:34::2  72.033 ms  72.377 ms  72.686 ms
% %  6  iana.r1.ord1.isc.org  76.288 ms  72.773 ms  71.481 ms
% %  7  int-0-0-1-8.r1.pao1.isc.org  73.027 ms  76.489 ms  77.507 ms
% %  8  int-0-0-1-0.r2.sql1.isc.org  73.555 ms  75.367 ms  74.769 ms
% %  9  www.NetBSD.org  72.036 ms  72.522 ms  71.39 ms
% % $
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: ICMP6}
% % \begin{center}
% % Internet Control Message Protocol for IPv6
% % \end{center}
% % 
% % \begin{verbatim}
% % 12:47:26.860045 IP6 2001:470:30:84:204:d7b0:0:1.51749 >
% %                     2001:4f8:3:7:2e0:81ff:fe52:9a6b.33435: UDP, length 12
% % 12:47:26.860265 IP6 2001:470:30:84::3 > 2001:470:30:84:204:d7b0:0:1:
% %                     ICMP6, time exceeded in-transit [|icmp6]
% % 12:47:26.860907 IP6 2001:470:30:84:204:d7b0:0:1.51749 >
% %                     2001:4f8:3:7:2e0:81ff:fe52:9a6b.33436: UDP, length 12
% % [...]
% % 12:47:29.759506 IP6 2001:470:30:84:204:d7b0:0:1.51749 >
% %                     2001:4f8:3:7:2e0:81ff:fe52:9a6b.33461: UDP, length 12
% % 12:47:29.830787 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b >
% %                     2001:470:30:84:204:d7b0:0:1: ICMP6,
% %                          destination unreachable[|icmp6]
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: TCP}
% % \begin{center}
% % Transmission Control Protocol
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % $ telnet www.google.com 80
% % Trying 173.194.73.99...
% % Connected to www.google.com.
% % Escape character is '^]'.
% % GET / HTTP/1.0
% % 
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: TCP}
% % \begin{center}
% % Transmission Control Protocol
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % 14:51:33.582076 IP 166.84.7.99.58356 > 67.195.160.76.80: S
% %       2267539609:2267539609(0) win 32768
% %       <mss 1460,nop,wscale 3,sackOK,nop,nop,nop,nop,timestamp 10>
% % 14:51:33.590748 IP 67.195.160.76.80 > 166.84.7.99.58356: S
% %       3229501874:3229501874(0) ack 2267539610 win 5792
% %       <mss 1440,sackOK,timestamp 1241180702 1,nop,wscale 8>
% % 14:51:33.590766 IP 166.84.7.99.58356 > 67.195.160.76.80: .
% %       ack 1 win 4197 <nop,nop,timestamp 1 1241180702>
% % 14:51:37.732720 IP 166.84.7.99.58356 > 67.195.160.76.80: P
% %       1:17(16) ack 1 win 4197 <nop,nop,timestamp 9 1241180702>
% % 14:51:37.741763 IP 67.195.160.76.80 > 166.84.7.99.58356: .
% %       ack 17 win 23 <nop,nop,timestamp 12411848 53 9>
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: TCP}
% % \begin{center}
% % Transmission Control Protocol over IPv6
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % $ telnet www.netbsd.org 80
% % Trying 2001:4f8:3:7:2e0:81ff:fe52:9a6b...
% % Connected to www.netbsd.org.
% % Escape character is '^]'.
% % GET / HTTP/1.0
% % 
% % 
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: TCP}
% % \begin{center}
% % Transmission Control Protocol IPv6
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % 14:58:11.128436 IP6 2001:470:30:84:204:d7b0:0:1.58334 >
% %       2001:4f8:3:7:2e0:81ff:fe52:9a6b.80: S 3232473102:3232473102(0)
% %       win 32768 <mss 1440,nop,wscale3,sackOK,nop,nop,nop,nop,timestamp 1[|tcp]>
% % 14:58:11.200293 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b.80 >
% %       2001:470:30:84:204:d7b0:0:1.58334: S 4139493123:4139493123(0)
% %       ack 3232473103 win 32768
% % 14:58:11.200337 IP6 2001:470:30:84:204:d7b0:0:1.58334 >
% %       2001:4f8:3:7:2e0:81ff:fe52:9a6b.80: . ack 1 win 4140
% % 14:58:14.322701 IP6 2001:470:30:84:204:d7b0:0:1.58334 >
% %       2001:4f8:3:7:2e0:81ff:fe52:9a6b.80: P 1:17(16) ack 1 win 4140
% % 14:58:14.589416 IP6 2001:4f8:3:7:2e0:81ff:fe52:9a6b.80 >
% %       2001:470:30:84:204:d7b0:0:1.58334: . ack 17 win 33120
% % 14:58:14.752420 IP6 2001:470:30:84:204:d7b0:0:1.58334 >
% % \end{verbatim}
% % 
% % 
% % \subsection{TCP/IP Basics: UDP}
% % \begin{center}
% % User Datagram Protocol
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % $ nslookup www.yahoo.com
% % Server:		155.246.1.20
% % Address:	155.246.1.20#53
% % 
% % Non-authoritative answer:
% % www.yahoo.com        canonical name = fp3.wg1.b.yahoo.com.
% % fp3.wg1.b.yahoo.com       canonical name = any-fp3-lfb.wa1.b.yahoo.com.
% % any-fp3-lfb.wa1.b.yahoo.com        canonical name = any-fp3-real.wa1.b.yahoo.com.
% % Name:	any-fp3-real.wa1.b.yahoo.com
% % Address: 98.139.183.24
% % 
% % $
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: UDP}
% % \begin{center}
% % User Datagram Protocol
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % 15:06:04.760444 IP (tos 0x0, ttl 64, id 0, offset 0, flags [none],
% %     proto UDP (17), length 59) panix.netmeister.org.49164 >
% %         cache2.ns.access.net.domain: 28557+ A? www.yahoo.com. (31)
% % 
% % 15:06:05.210569 IP (tos 0x0, ttl 63, id 1862, offset 0, flags [none],
% %     proto UDP (17), length 207) cache2.ns.access.net.domain >
% %         panix.netmeister.org.49164: 28557 4/2/2
% %             www.yahoo.com. CNAME fp3.wg1.b.yahoo.com.[|domain]
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: UDP}
% % \begin{center}
% % User Datagram Protocol over IPv6
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % $ dig -6 @2001:470:20::2 www.yahoo.com
% % 
% % ;; ANSWER SECTION:
% % www.yahoo.com.          300     IN      CNAME   fp3.wg1.b.yahoo.com.
% % fp3.wg1.b.yahoo.com.    60      IN      CNAME   any-fp3-lfb.wa1.b.yahoo.com.
% % any-fp3-lfb.wa1.b.yahoo.com. 300 IN     CNAME   any-fp3-real.wa1.b.yahoo.com.
% % any-fp3-real.wa1.b.yahoo.com. 60 IN     A       98.139.183.24
% % 
% % ;; Query time: 51 msec
% % ;; SERVER: 2001:470:20::2#53(2001:470:20::2)
% % ;; WHEN: Sat Mar  3 22:49:44 2012
% % ;; MSG SIZE  rcvd: 128
% % 
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: UDP}
% % \begin{center}
% % User Datagram Protocol over IPv6
% % \end{center}
% % \vspace{.2in}
% % \begin{verbatim}
% % 15:24:20.731990 IP6 (hlim 64, next-header: UDP (17), length: 39)
% %        2001:470:30:84:204:d7b0:0:1.65037 > 2001:470:20::2.53:
% %        [udp sum ok] 18545+ A? www.yahoo.com. (31)
% % 
% % 15:24:20.976796 IP6 (hlim 61, next-header: UDP (17), length: 119)
% %        2001:470:20::2.53 > 2001:470:30:84:204:d7b0:0:1.65037:
% %        18545 4/0/0 www.yahoo.com.[|domain]
% % 
% % \end{verbatim}
% % 
% % \subsection{TCP/IP Basics: Putting it all together}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.6]{pics/tcpip-stack.eps}
% % \end{center}
% % \vspace*{\fill}
% % 
% % \subsection{Networking}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=0.8]{pics/dsr.eps} \\
% % \end{center}
% % \vspace*{\fill}
% % 
% % 
% % \subsection{Networking}
% % \vspace*{\fill}
% % \begin{center}
% % 	\includegraphics[scale=1.3]{pics/car-duct-tape.eps} \\
% % \end{center}
% % \vspace*{\fill}
% % 

\subsection{Internet Maps and Architecture}
\begin{itemize}
	\item \verb+https://is.gd/C66S8a+
	\item \verb+https://www.submarinecablemap.com/+
	\item \verb+https://en.wikipedia.org/wiki/Peering+
	\item \verb+https://is.gd/tpPNE5+
	\item \verb+https://is.gd/B0d3kh+
	\item \verb+https://amzn.com/0061994936+
	\item \verb+https://bgp.he.net/+
	\item \verb+https://www.wired.com/2014/08/shark_cable/+
\end{itemize}

\subsection{IPv6}
\begin{itemize}
	\item \verb+https://www.potaroo.net/papers/isoc/2005-07/ipv6size.html+
	\item \verb+https://bgp.he.net/ipv6-progress-report.cgi+
	\item \verb+https://ipv6.he.net/statistics/+
	\item \verb+https://tunnelbroker.net/+
\end{itemize}

%\subsection{Reading}
%\begin{itemize}
%	\item \verb+https://is.gd/qXVo2j+
%\end{itemize}
%\vspace{.5in}
%Commands:
%\begin{itemize}
%	\item \verb+tcpdump(8)+
%	\item \verb+ktrace(1)+ / \verb+strace(1)+
%	\item \verb+tcp(4)+/\verb+ip(4)+
%	\item \verb+netstat(1)+
%	\item \verb+nslookup(1)+
%\end{itemize}
%
\end{document}
